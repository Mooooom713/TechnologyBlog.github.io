<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
<!--<![endif]-->

<head>
  <title>JavaScript高级程序设计读书笔记 | 二十岁的某一天</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="二十岁的某一天">
    <meta name="author" content="MOMO">
    <meta name="description" content="Love Life" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/TechnologyBlog.github.io/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="二十岁的某一天" type="application/atom+xml">
    <link rel="stylesheet" href="/TechnologyBlog.github.io/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/TechnologyBlog.github.io/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/TechnologyBlog.github.io/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/TechnologyBlog.github.io/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/TechnologyBlog.github.io/js/html5shiv.min.js"></script>
    <script src="/TechnologyBlog.github.io/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

<div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
    <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
        <img src="/TechnologyBlog.github.io/img/close.png" alt="Close" />
    </div>
    <!-- Lists in Slidebars -->
    <ul class="sb-menu">
        <li><a href="/TechnologyBlog.github.io/" class="animsition-link" title="Home">Home</a></li>
        <li><a href="/TechnologyBlog.github.io/archives" class="animsition-link" title="archive">archives</a>
        </li>
        <!-- Dropdown Menu -->
        
        <li>
            <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
                
                <li><a href="https://mooooom713.github.io/Animation/" target="_BLANK" class="animsition-link">MOMO的css动画</a>
                </li>
                
                <li><a href="https://mooooom713.github.io/SauryQin/" target="_BLANK" class="animsition-link">汉诺塔小游戏</a>
                </li>
                
                <li><a href="https://mooooom713.github.io/Doraemon/" target="_BLANK" class="animsition-link">一个div画哆啦A梦</a>
                </li>
                
            </ul>
        </li>
        
        
        <li>
            <a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
                
                <li><a href="/TechnologyBlog.github.io/categories/CSS/"
                        class="animsition-link">CSS<small>(2)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/Git/"
                        class="animsition-link">Git<small>(1)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/HTML/"
                        class="animsition-link">HTML<small>(1)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/JavaScript/"
                        class="animsition-link">JavaScript<small>(1)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/今日份的学习/"
                        class="animsition-link">今日份的学习<small>(6)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/学习笔记/"
                        class="animsition-link">学习笔记<small>(8)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/实习/"
                        class="animsition-link">实习<small>(9)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/实用/"
                        class="animsition-link">实用<small>(15)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/盘点/"
                        class="animsition-link">盘点<small>(1)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/计算机网络/"
                        class="animsition-link">计算机网络<small>(1)</small></a></li>
                
                <li><a href="/TechnologyBlog.github.io/categories/面试/"
                        class="animsition-link">面试<small>(2)</small></a></li>
                
            </ul>
        </li>
        
        
        <li>
            <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
                
                <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                
            </ul>
        </li>
        
    </ul>
    <!-- Lists in Slidebars -->
    <ul class="sb-menu secondary">
        
        <li><a href="javascript:;" class="popup-trigger" title="Search"><span class="search-icon"></span>Search</a></li>
        
        <li><a href="/TechnologyBlog.github.io/about.html" class="animsition-link" title="about">About</a></li>
        <li><a href="/TechnologyBlog.github.io/atom.xml" class="animsition-link" title="rss">RSS</a></li>
    </ul>
</div>

<!-- ============================ END Off-canvas navigation =========================== -->

<!-- ============================ #sb-site Main Page Wrapper =========================== -->

<div id="sb-site">
    <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

    <!-- ============================ Header & Logo bar =========================== -->

    <div id="navigation" class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <!-- Nav logo -->
                <div class="logo">
                    <a href="/TechnologyBlog.github.io" title="Logo" class="animsition-link">
                         <img src="/TechnologyBlog.github.io/img/logo.png" alt="Logo" width="35px;" /> 
                    </a>
                </div>
                <!-- // Nav logo -->
                <!-- Info-bar -->
                <nav>
                    <ul class="nav">
                        <li><a href="/TechnologyBlog.github.io" class="animsition-link">二十岁的某一天</a></li>
                        <li class="nolink"><span>Always </span>Creative.</li>
                        
                        <li><a href="https://github.com/Mooooom713" title="Github" target="_blank"><i class="icon-github"></i></a>
                        </li>
                        
                        
                        <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i
                                    class="icon-twitter"></i></a></li>
                        
                        
                        <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i
                                    class="icon-facebook"></i></a></li>
                        
                        
                        <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i
                                    class="icon-google-plus"></i></a></li>
                        
                        
                        <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i
                                    class="icon-sina-weibo"></i></a></li>
                        
                        <li class="nolink"><span>Welcome!</span></li>
                    </ul>
                </nav>
                <!--// Info-bar -->
            </div>
            <!-- // .container -->
            <div class="learnmore sb-toggle-right">More</div>
            <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
            </button>
        </div>
        <!-- // .navbar-inner -->
    </div>

    <!-- ============================ Header & Logo bar =========================== -->
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2018-03-26T08:34:57.000Z" itemprop="datePublished">
          2018-03-26
      </time>
    
    
    | 
    <a href='/TechnologyBlog.github.io/tags/学习笔记/'>学习笔记</a>
    
    
</span>
                <h1>JavaScript高级程序设计读书笔记</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<script src="\TechnologyBlog.github.io\assets\js\APlayer.min.js"> </script><p>关于JavaScript和ECMAScript的关系<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/1.jpg"><br>核心：ECMAScript<br>文档对象模型：DOM<br>浏览器对象模型：BOM<br>ECMA-262:定义的ECMAScript和web浏览器没有依赖关系。</p>
<p>ECMAScript兼容：<br>1.支持ECMA-262描述的所有“类型、值、对象、属性、函数以及程序句法和语义”。<br>2.支持Unicode字符标准。<br>3.添加ECMA-262没有描述的“更多类型、值、对象、属性和函数”。ECMA-262所说的这些新增特性，主要是指该标准中没有规定的新对象和对象的新属性。<br>4.支持ECMA-262没有定义的“程序和正则表达式语法”。（也就是说，开源修改和扩展内置的正则表达式语法）</p>
<p>文档对象模型（DOM）：<br>是针对XML但经过扩展用于HTML的应用程序编程接口（API）。<br>DOM把整个页面中的每个组成部分都是某种类型的节点，这些节点又包含着不同类型的数据。</p>
<p>DOM 1级由两个模块组成：<br>DOM核心（DOM Code）和 DOM HTML</p>
<p>DOM 2级在DOM的基础上又扩充了鼠标和用户界面事件、范围、遍历（迭代DOM文档的方法）等细分模块，而且通过对象接口增加了对CSS的支持。</p>
<p>DOM 2级引入的新模块：<br>1.DOM试图（DOM Views）<br>2.DOM事件（DOM Events）<br>3.DOM样式（DOM Style）<br>4.DOM遍历和范围</p>
<p>DOM 3级：<br>1.引入了以统一方式加载和保存文档的方法（在DOM加载和保存模块中定义）<br>2.新增了验证文档的方法（在DOM验证模块中定义）</p>
<p>BOM：从根本上讲，BOM只处理浏览器窗口和框架，但习惯上也把所有针对浏览器的JS扩展算作BOM的一部分。<br>1.弹出新浏览器窗口的功能<br>2.移动、缩放和关闭浏览器窗口的功能<br>3.提供浏览器详细信息的navigator对象<br>4.提供浏览器所加载页面的详细信息的location对象<br>5.提供用户显示器分辨率详细信息的srceen对象<br>6.对cookies的支持<br>7.像XMLHttpRequest和IE的ActiveXObject的自定义对象</p>
<p>小结：<br>JS是一种专为与网页交互而设计的脚本语言。<br>由下列三个不同的部分组成：<br>1.ECMAScript，由ECMA-262定义，提供核心语言功能<br>2.文档对象模型，提供访问和操作网页内容的方法和接口<br>3.浏览器对象模型，提供与浏览器交互的方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;元素6个属性</span><br></pre></td></tr></table></figure>
<p>1.async：可选。表示应该立即下载脚本，但不应妨碍页面中的其他操作。只对外部脚本文件有效。<br>2.charset：可选。表示通过src属性指定的代码的字符集。<br>3.defer：可选。表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本文件有效。<br>4.language：已废弃。<br>5.src：可选。表示包含要执行代码的外部文件<br>6.type：可选。开源看成language的替代属性。</p>
<p>在<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br></pre></td></tr></table></figure>标签中加入defer属性相当于告诉浏览器立即下载但是延迟执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在现实中，延迟脚本并不一定会按照顺序执行，</span><br><span class="line">也不一定会在DOMContentLoader事件触发前执行，因此最好只包含一个延迟脚本</span><br></pre></td></tr></table></figure><br>如果HTML中包含了两个都加了async属性的script标签，第二个脚本文件可能会在第一个脚本文件之前执行，因此两者之间互不依赖非常重要。指定async属性的目的是不让页面等待两个脚本下载和执行，从而异步加载页面其他内容。为此，异步脚本不要在加载期间修改DOM。<br>异步脚本一定会在页面的load事件前执行，但可能会在DOMContentLoaded事件触发之前或之后执行。</p>
<p>外部文件的优点：<br>1.可维护性：遍及不同HTML页面的JavaScript会造成维护问题。<br>2.可缓存：浏览器能够根据具体的设置缓存连接的所有外部JavaScript文件。<br>3.适应未来：通过外部文件来包含JavaScript无须使用XHTML或注释hach。</p>
<p>文档类型（doctype）的两种文档模式：<br>1.混杂模式（quirks mode）：会让IE的行为与（包含非标准特性的）IE5相同。<br>2.标准模式（standards mode）：让IE的行为更接近标准行为。</p>
<p>虽然这两种模式主要影响CSS内容的呈现，但在某些情况下也会影响到JavaScript的解释执行。</p>
<p>如果在文档开始处没有发现文档类型声明，则所有浏览器都会默认开启混杂模式。但混杂模式不是什么值得推荐的做法，因为不同浏览器在这种模式下的行为差异非常大，如果不使用某些hack技术，跨浏览器的行为根本就没有一致性可言。<br>对于IE提出的标准模式，可以通过使用过渡型（transitional）或框架集型（frameset）文档类型来触发。</p>
<p>标识符<br>1.第一个字符必须是一个字母、下划线、一个美元符号<br>2.其他字符可以是字母、下划线、美元等或者数字</p>
<p>严格模式（”use strict”;&lt;-编译指示）<br>要在整个脚本中启用严格模式，可以在顶部添加上述编译指示。</p>
<p>关键字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">break do instanceof typeof case else </span><br><span class="line">new var catch finally return void continue </span><br><span class="line">for switch while debugger function this with </span><br><span class="line">	default if throw delete in try</span><br></pre></td></tr></table></figure></p>
<p>保留字：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">abstract enum int short boolean export </span><br><span class="line">interface static byte extends long super </span><br><span class="line">char final native synchronized class float</span><br><span class="line"> package throws const goto private </span><br><span class="line"> transient debugger implements protected </span><br><span class="line"> volatile double import public</span><br></pre></td></tr></table></figure></p>
<p>严格模式下保留字缩减为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class enum extends super const export import</span><br></pre></td></tr></table></figure></p>
<p>严格模式下，第五版对以下保留字施加了限制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implements package public interface private static let protected yield</span><br></pre></td></tr></table></figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第5版对eval和arguments还施加了限制，在严格模式下，这两个名字也不能作为标识符或属性名，否则会抛出错误。</span><br></pre></td></tr></table></figure></p>
<p>用var操作符定义变量将成为该变量的作用域中的局部变量。也就是说，如果在函数中使用var定义一个变量，那么这个变量在函数退出后就会被销毁。</p>
<p>ECMAScript有五种简单数据类型：<br>1.Undefined<br>2.Null<br>3.boolean<br>4.Number<br>5.String<br>还有一种复杂数据类型（object）。<br>object本质上是由一组无序的名值对组成的。</p>
<p>typeof操作符：<br>返回下列某个字符串<br>“undefined” —–如果这个值未定义<br>“boolean” —–如果这个值是布尔值<br>“string” —–如果这个值是字符串<br>“number” —–如果这个值是数组<br>“object” —–如果这个值是对象或null<br>“function” —–如果这个值是函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">从技术角度讲，函数在ECMAScript中是对象，不是一种数据类型。</span><br><span class="line">然而，函数也确实有一些特殊属性，因此通过typeof操作符来区分函数和其他对象是必要的。</span><br></pre></td></tr></table></figure>
<p>1.Undefined类型<br>ECMA-262第三版引入undefined是为了正式区分空对象指针与未经初始化的变量。<br>对未初始化和未声明的变量执行typeof操作符都返回了undefined值；这个结果有其逻辑上的合理性。因为虽然这两种变量从技术角度看有本质区别，但实际上无论对哪一种变量也不可能执行真正的操作。</p>
<p>2.Null类型<br>Null类型是第二个只有一个值的数据类型，这个特殊的值是null。从逻辑角度来看，null值表示一个空对象指针，而这也正是使用typeof操作符检测null值时会返回“object”的原因<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果在null和undefined之间相等操作符（==）总是返回true。但是单独初始化变量，使变量是undefined，此时变量的布尔值是false。定义一个变量，使变量值为null，此时变量的布尔值也是false。</span><br></pre></td></tr></table></figure><br>只要意在保存对象为变量，而且还没有真正保存对象，就应该明确地让该变量保存null值。这样做不仅可以体现null作为空对象指针的惯例，而且有助进一步区分null和undefined。</p>
<p>3.Boolean类型<br>该类型只有两个字面值：true和false。<br>这两个值与数字值不是一回事，因此true不一定等于1，而false也不一定等于0。<br>可以对任何数据类型的值调用Boolean()函数，而且总会返回一个Boolean值。<br>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var message = &apos;hello word!&apos;;</span><br><span class="line">var messageB = Boolean(message);</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:left">数据类型</th>
<th style="text-align:left">转换为true的值</th>
<th style="text-align:left">转换为false的值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Boolean</td>
<td style="text-align:left">true</td>
<td style="text-align:left">false</td>
</tr>
<tr>
<td style="text-align:left">String</td>
<td style="text-align:left">任何非空字符串</td>
<td style="text-align:left">空字符串</td>
</tr>
<tr>
<td style="text-align:left">Number</td>
<td style="text-align:left">任何非零数字值（包括无穷大）</td>
<td style="text-align:left">0和NaN</td>
</tr>
<tr>
<td style="text-align:left">Object</td>
<td style="text-align:left">任何对象</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left">Undefined</td>
<td style="text-align:left">不适用</td>
<td style="text-align:left">Undefined</td>
</tr>
</tbody>
</table>
<p>4.Number类型<br>整数和浮点数值<br>十进制，可以直接定义<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var Ocal = 070;  //八进制</span><br><span class="line">var hex  = 0xA;  //十六进制</span><br></pre></td></tr></table></figure></p>
<p>1).浮点数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var floatN = 3.125e7;(科学记数法)//3.125*10^7</span><br></pre></td></tr></table></figure><br>浮点数值的最高精度是17位小数。<br>*不要测试某个特定的浮点数值，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(a+b == 0.3)&#123;</span><br><span class="line">	alert(&quot;u got 0.3 &quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>不要这样测试，因为0.2+0.1的结果是0.3000000000000004。这个因为ECMA-262是使用基于IEEEE754数值的浮点计算的通病。</p>
<p>2).数值范围<br>由于内存的限制，ECMAScript能够表示的最小数值保存在Number.MIN_VALUE中，大多数浏览器这个值是5e-324,最大数值保存在Number.MAX_VALUE，大多数浏览器这个值是1.7976931348623157e+308。如果在某次计算的结果超过了JavaScript的数值范围的值，那么这个数值将被自动转换或特殊的Infinity值。具体来说，如果这个数为负数，则会被转换成-Infinity，如果这个值是整数，则会被转换成Infinity。<br>Infinity不能参与计算，要确定一个数值是不是有穷的，可以用isFinite()函数，在最大与最小之间时会返回true。<br>尽管在计算中很少出现某些值超出表示范围的情况，但在执行极小或极大数值的计算时，检测监控这些值时可能的，也是必须的。</p>
<p>3).NaN(not a number)<br>是一个特殊的数值。这个数值用于表示一个本来要返回数值的操作数未返回的情况（这样就不会抛出错误了）。<br>NaN的特点：<br>(1).任何涉及NaN的操作（例如NaN/10）都会返回NaN，这个特点在多步计算中有可能导致问题。<br>(2).NaN与任何值都不相等，包括NaN本身针对NaN，ECMAScript定义了isNaN()函数，这个函数接受一个参数，该参数可以是任何类型，而函数会帮我们确定这个参数是否“不是数值”。<br>*isNaN()确实也适用于对象。在基于对象调用isNaN()函数时，会首先调用对象的valueOf()方法，然后确定该方法返回的值是否可以转换为数值。如果不能，则基于这个返回值再调用toString()方法，再测试返回值。而这个过程也是ECMAScript中内置函数和操作符的一般执行流程</p>
<p>4).数值转换</p>
<p>1.Number()函数</p>
<p>a.如果是Boolean值，true和false将分别转换为1和0<br>b.如果是数值，只是简单的传入和返回<br>c.如果是null值，返回0<br>d.如果是undefined，返回NaN<br>e.如果是字符串，返回NaN<br>f.如果是字符串，遵循下列规则：</p>
<p>(1).如果字符串只包含数字，将其转化为十进制<br>(2).如果字符串中包含有效的浮点格式，将其转换为对应的浮点数值<br>(3).如果字符串中包含有效的十六进制格式，如“0xf”，则将其转换为相同大小的十进制整数值<br>(4).如果字符串中是空的（不包含任何字符），则将其转换为0<br>(5).如果字符串中包含除上述格式之外的字符，则将其转换为NaN<br>(6).如果是对象，则调用对象的valueOf()方法，然后依照前面的规则转换返回的字符串值</p>
<p>2.parseInt()函数<br>从第一个非空字符开始，如果第一个不是数字字符或者负号，parseInt()返回NaN。如果第一个是数字字符或者负号就会继续解析，知道解析完所有后续字符或者遇到了一个非数字字符。因为ECMAScript3和5在解析八进制时有分歧，于是可以给parseInt()函数添加参数。<br>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var num = parseInt(&quot;0xAF&quot;,16);//175</span><br></pre></td></tr></table></figure></p>
<p>3.parseFloat()函数<br>与parseInt()解析类似，但第一个小数点是有效的，从第二个小数点开始无效。<br>parseFloat与parseInt不同的一个地方是parseFloat会始终忽略前面的0，且只解析十进制值，因此它没有用第二个参数指定基数的用法。<br>最后，如果用parseFloat可解析为整数的数，parseFloat()会返回整数。</p>
<p>5.string类型<br>String类型用于表示由零或多个16位Unicode字符组成的字符序列，即字符串。<br>(1).字符字面量</p>
<table>
<thead>
<tr>
<th style="text-align:left">字面量</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:left">换行</td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:left">制表</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">退格</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:left">回车</td>
</tr>
<tr>
<td style="text-align:left">\f</td>
<td style="text-align:left">进纸</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">斜杠</td>
</tr>
<tr>
<td style="text-align:left">\’’</td>
<td style="text-align:left">单引号，用单引号表示的字符串中使用</td>
</tr>
<tr>
<td style="text-align:left">\””</td>
<td style="text-align:left">双引号，用双引号表示的字符串中使用</td>
</tr>
<tr>
<td style="text-align:left">\xnn</td>
<td style="text-align:left">以十六进制代码nn表示一个字符（n为0~F）</td>
</tr>
<tr>
<td style="text-align:left">\unnnn</td>
<td style="text-align:left">以十六进制代码nnnn表示的一个Unicode字符（其中n为0~F）</td>
</tr>
</tbody>
</table>
<p>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var text = &quot;this is the letter sigma:\u03a3 .&quot;;//Σ</span><br></pre></td></tr></table></figure><br>这个text有28个字符，且text.length = 28。length这个属性返回的字符数包括16位字符的数目。如果字符串中包含双字节字符（汉字及中文标点），那么length属性可能不会精确的返回字符串中的字符数目</p>
<p>(2).字符串的特点<br>ECMAScript中的字符串是不可变的，也就是说，字符串一旦创建，他们的值就不能改变。</p>
<p>(3).转换为字符串<br>a.使用toString()方法。这个方法唯一要做的就是返回相应值的字符串表现。<br>数值、布尔值、对象和字符串值都有toString()方法。但null和undefined没有这个方法。<br>多数情况下，调用toString()方法不必传递参数，但是在调用数值的toString()方法时，可以传递一个参数：输出数值的基数<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var num = 10;</span><br><span class="line">alert(num.toString(10));//&quot;10&quot;</span><br><span class="line">alert(num.toString(2));//&quot;1010&quot;</span><br><span class="line">alert(num.toString(8));//&quot;12&quot;</span><br></pre></td></tr></table></figure></p>
<p>b.在不知道要转换的值是不是null和undefined的情况下，还可以使用转型函数String()，这个函数能够将任何类型的值转换为字符串。<br>规则：<br>1.如果值有toString()方法，则调用该方法（没有参数）并返回相应的结果<br>2.如果值是null，则返回“null”<br>3.如果值是undefined，则返回“undefined”<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var value1 = 10;</span><br><span class="line">var value2 = true;</span><br><span class="line">var value3 = null;</span><br><span class="line">var value4;</span><br><span class="line">alert(String(value1));//&quot;10&quot;</span><br><span class="line">alert(String(value2));//&quot;true&quot;</span><br><span class="line">alert(String(value3));//&quot;null&quot;</span><br><span class="line">alert(String(value4));//&quot;undefined&quot;</span><br></pre></td></tr></table></figure></p>
<p>6.object类型<br>ECMAScript中的对象其实就是一组数据和功能的集合。对象可以通过执行new操作符后跟要创建的对象类型的名称来创建。<br>object的每个实例都具有下列属性和方法：</p>
<p>(1).cnstructor:保存着用于创建当前对象的函数，构造函数（constructor）就是object()。<br>(2).hasOwnProperty(propertyName):用于检查给定的属性在当前对象示例中（而不是实力原型中）是否存在。其中，作为参数的属性名必须以字符串形式指定（例如：o.hasOwnProperty(“name”)）<br>(3).isPrototypeOf(object):用于检查传入的对象是否传入对象模型。<br>(4).propertyIsEnumerable(propertyName):用于检查给的属性是否能够使用for-in语句来枚举。与hsaOwnProperty()方法一样，作为参数的属性名必须以字符串形式指定<br>(5).toLocaleString():反对对象的字符串表示，该字符串与执行环境的地区对应<br>(6).toString():返回对象的字符串表示<br>(7).valueOf():返回对象的字符串、数值或布尔值表示。通常与toString()方法的返回值相同。object是所有对象的基础，因此所有对象都具有这些基本的属性和方法。</p>
<p>操作符<br>ECMA-262描述了一组用于操作数据值的操作符。算术操作符（+<br>、-），位操作符、关系操作符和相等操作符</p>
<p>1.一元操作符<br>(1).递增和递减操作符<br>1).前置型（++a）（–a）<br>执行前置递增和递减操作时，变量的值都是在语句被值以前改变的（在计算机科学领域，这种情况通常被称为副效应）</p>
<p>2).后置型（a++）（a–）<br>递增和递减操作符时在包含他们的语句被求值之后才执行的。</p>
<p>前置加减和后置加减这4个操作符对任何值都适用。（整数、字符串、布尔值、浮点数值和对象）<br>规则：<br>a.在应用于一个包含有效数字字符的字符串时，先将其转换为数字值，再执行加减1的操作。字符串变量成数值变量。<br>b.不包含有效数字字符的字符串时，将变量的值设置为NaN。字符串变量变成数值变量。<br>c.false时，现将其转换为0再执行加减1的操作，布尔值变量变成数值变量。<br>d.true时，先将其转换为0再执行加减1的操作，布尔值变量变成数值变量。<br>e.在应用于浮点数值时，执行加减1的操作<br>f.应用于对象时，先调用对象的valueOf()方法以取得一个可供操作的值，然后对该值应用前述规则。如果结果时NaN，则在调用toString()方法后再应用前述规则。对象变量变成数值变量。</p>
<p>2.一元加和减操作符（+、-）<br>+放在数值前面，对数值不会产生任何影响，但在非数值应用一元加操作时，操作符会像Number()转型函数一样对这个值执行转换。如：false/true -&gt; 0/1<br>-放在数值前面主要是用于表示附属，应用于非数值的其他类型，也会先转换再变为负数</p>
<p>3.位操作符<br>位操作符用于再在最基本的层次上，即按内存中表示数值的位来操作数值。<br>ECMAScript中所有数值都以IEEE-754 64位格式存储，但操作符并不直接操作64位的值，而是先将其转换位32位的整数然后执行操作，最后再将结果转换回64位。<br>对于有符号的整数，32位中的前31位用于表示整数的数值。第32位用于表示数值的符号：0表示正数，1表示负数。表示符号的位叫符号位，符号位的值决定了其他位数值的格式。其中，正数以纯二进制格式存储，3位中的每一位都表示2的幂<br>如：18的二进制<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/2.jpg"></p>
<p>负数同样以二进制存储，但使用的格式是二进制补码。<br>计算二进制补码：<br>(1).求这个数值绝对值的二进制码（如：-18，要先求18）<br>(2).求二进制反码，即将0替换成1，将1替换成0<br>(3).得到的二进制反码加1</p>
<p>ECMAScript会尽力向我们隐藏所有计算过程<br>如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var num = -18;</span><br><span class="line">alert(num.toString(2));//&quot;-10010&quot;</span><br></pre></td></tr></table></figure><br>*Bug：转换过程（64-&gt; 32 -&gt; 64）导致了一个严重的副效应。</p>
<p>在对特殊NaN和Infinity值应用位操作时，这两个值都会被当成0来处理。</p>
<p>(1).按位非（NOT）<br>按位非操作符由一个波浪线（~）表示，执行按位非的结果就是返回数值的反码。按位非是ECMAScript操作符中少数几个与二进制计算有关的操作符之一<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var num1 = 25;</span><br><span class="line">var num2 = ~num1;//-26</span><br></pre></td></tr></table></figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var num1 = 25;</span><br><span class="line">var num2 = -num1-1;//-26</span><br></pre></td></tr></table></figure></p>
<p>总结：<br>按位非操作的本质：操作数的负值减1。<br>虽然第二个方式也可以实现和第一个一样的结果，但按位非是在数值表示的最底层执行操作，因此速度更快。</p>
<p>(2).按位与（AND）<br>&amp;表示按位与，它有两个操作符数。从本质上讲，按位与操作就是将两个数值的每一位对齐，然后根据下表中的规则，对相同位置上的两个数执行AND操作</p>
<table>
<thead>
<tr>
<th style="text-align:left">第1个数值的位</th>
<th style="text-align:left">第2个数值的位</th>
<th style="text-align:left">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">1</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
</tr>
</tbody>
</table>
<p>简单来说，按位与操作只在两个数值的对应位都是1时才返回1，任何一位是0，结果都是0<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result = 25 &amp; 3 ;</span><br><span class="line">alert(result);//1</span><br></pre></td></tr></table></figure><br>原因：<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/3.jpg"></p>
<p>(3).按位或（OR）<br>按位或操作符由一个竖线符号（|）表示，同样也有两个操作数。按位或操作遵循下表</p>
<table>
<thead>
<tr>
<th style="text-align:left">第1个数值的位</th>
<th style="text-align:left">第2个数值的位</th>
<th style="text-align:left">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">0</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
</tr>
</tbody>
</table>
<p>由此可见，按位或操作是有一个位是1就返回1，只有2个位同为0时才返回0<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result = 25 | 3 ;</span><br><span class="line">alert(result);//27</span><br></pre></td></tr></table></figure><br>原因：<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/4.jpg"><br>二进制11011等于27</p>
<p>(4).按位异或（XOR）<br>按位异或操作符是由一个（^）表示，也有两个操作数。以下是按位异或的真值表</p>
<table>
<thead>
<tr>
<th style="text-align:left">第1个数值的位</th>
<th style="text-align:left">第2个数值的位</th>
<th style="text-align:left">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">0</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">1</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
<td style="text-align:left">0</td>
</tr>
</tbody>
</table>
<p>这个操作在两个数对应位上只有1个1时才返回1<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var result = 25 ^ 3 ;</span><br><span class="line">alert(result);//26</span><br></pre></td></tr></table></figure><br>原因：<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/5.jpg"><br>二进制11010等于26</p>
<p>(5).左移<br>左移操作符由2个小于号（&lt;&lt;）表示。这个操作符会将数值的所有位向左移动指定的位数。<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var oldValue = 2 ;</span><br><span class="line">var newValue = oldValue &lt;&lt; 5;//64</span><br></pre></td></tr></table></figure><br>原因：<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/6.jpg"><br>红色的0代表符号位<br>左移过后1后面都是用0填充<br>*左移不会影响操作数的符号位</p>
<p>(6).有符号的右移<br>有符号的右移操作符由两个大于号（&gt;&gt;）表示，这个操作符会将数值向右移动，但保留符号位<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var oldValue = 64 ;</span><br><span class="line">var newValue = oldValue &gt;&gt; 5;//2</span><br></pre></td></tr></table></figure><br>原因：<br><img src="/TechnologyBlog.github.io/2018/03/26/JavaScript高级程序设计读书笔记/7.jpg"><br>红色的0代表符号位<br>右移过后符号位后面用0填充，符号位不动<br>*有符号的右移不会影响操作数的符号位</p>
<p>(7).无符号右移<br>无符号右移操作由3个大于号（&gt;&gt;&gt;）表示，这个操作符会将数值的所有32位都向右移动。对正数来说，无符号右移的结果与有符号右移相同<br>例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var oldValue = 64 ;</span><br><span class="line">var newValue = oldValue &gt;&gt;&gt; 5;//2</span><br></pre></td></tr></table></figure><br>但对于负数来说，情况就不一样了。首先，无符号右移是以0来填充空位，而不是像有符号右移那样以符号位的值来填充空位。所以，对正数的无符号右移与有符号右移结果相同，但对负数的结果就不一样了。无符号右移操作符会把负数的二进制码当成正数的二进制码。因为负数以其绝对值的二进制补码形式表示，因此会导致无符号右移后的结果非常之大。</p>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="m-pagination col-md-8 col-md-offset-2 col-sm-24" role="pagination">
    
    <a class="pull-left" href="/TechnologyBlog.github.io/2018/03/29/网易课堂笔记/" style="float: left;">
        ← 网易课堂笔记
    </a>
    
    
    <a class="pull-right" href="/TechnologyBlog.github.io/2018/03/06/那些年码过的代码/">
        那些年码过的代码 →
    </a>
    
</nav>

        <div class="col-md-8 col-md-offset-2 col-sm-24"><script type="text/javascript">
  /**
   * 搜狐畅言
   */

  /*
  document.write('<div id="SOHUCS" sid="' + window.location.pathname.slice(1) + '" ></div>');

  window.onload = function () {
    (function () {
      var appid = 'cytXXXX';
      var conf = 'prod_xxxxxxxxxxxxxxxxx';
      var width = window.innerWidth || document.documentElement.clientWidth;
      var loadJs = function (d, a, id) {
        var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
        var b = document.createElement("script");
        b.setAttribute("type", "text/javascript");
        b.setAttribute("charset", "UTF-8");
        b.setAttribute("src", d);
        if (id) {
          b.setAttribute("id", id);
        }
        if (typeof a === "function") {
          if (window.attachEvent) {
            b.onreadystatechange = function () {
              var e = b.readyState;
              if (e === "loaded" || e === "complete") {
                b.onreadystatechange = null;
                a()
              }
            }
          } else {
            b.onload = a
          }
        }
        c.appendChild(b)
      };

      loadJs("https://changyan.sohu.com/upload/changyan.js", function () {
        window.changyan.api.config({
          appid: appid,
          conf: conf
        })
      });
    })();
  }
  */

</script>
</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By MOMO. All Rights Reserved.
                </p>
                <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/Mooooom713" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/TechnologyBlog.github.io/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/TechnologyBlog.github.io/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/TechnologyBlog.github.io/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/TechnologyBlog.github.io/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



      
            <style>
.local-search-popup {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  background: rgba(255, 255, 255, .9);
  color: #333;
  z-index: 9999;
  border-radius: 5px;
  overflow: scroll;
}
#local-search-input {
  width: 100%;
  border: none;
  outline: none;
  border-bottom: 1px solid #151515;
  background-color: initial;
}
.search-result-list {
  list-style: none;
  padding-left: 0;
}
.search-result-list > li {
  margin-top: 15px;
  border-bottom: 1px solid #ddd;
  transition: all ease .3s;
}
.search-result-list > li:hover {
  border-bottom: 1px solid gray;
}
.search-result-title {
  font-size: 16px;
}
.search-result {
  line-height: 20px;
}
.search-keyword {
  font-weight: normal;
  color: #c00;
}

@media (min-width: 890px) {
  .popup-btn-close {
    position: absolute;
    top: 15px;
    left: 35px;
    border: 1px solid #151515;
    padding: 0px 10px;
    border-top-left-radius: 8px;
    cursor: pointer;
    transition: all ease .3s;
  }
  .popup-btn-close:hover {
    background: #151515;
    opacity: .9;
    color: #fff;
  }
}
@media (max-width: 890px) {
  .popup-btn-close {
    font-size: 0;
    position: fixed;
    right: 20px;
    bottom: 50px;
    width: 50px;
    height: 50px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 1px 1px 5px #888;
    cursor: pointer;
  }
  .popup-btn-close::after {
    content: '←';
    color: #151515;
    position: absolute;
    top: 0;
    left: 0;
    font-size: 20px;
    width: 100%;
    height: 100%;
    line-height: 50px;
    text-align: center;
  }
}
</style>

<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="col-md-8 col-md-offset-2">
      <div class="local-search-header clearfix">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="local-search-input-wrapper">
          <input autocomplete="off" placeholder="Search..." type="text" id="local-search-input">
        </div>
      </div>
      <div id="local-search-result"></div>
    </div>
  </div>
</div>

<script src="/TechnologyBlog.github.io/js/ziploader.js"></script>


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // get search zip version
    $.get('/TechnologyBlog.github.io/searchVersion.txt?t=' + (+new Date()), function(res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson () {
      initLoad(['/TechnologyBlog.github.io/search.zip'], {
        loadOptions: {
          success: function(obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function(e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions:{
          'json':'application/json'
        }
      })
    }


    // search function;
    var searchFunc = function(search_id, content_id) {
      'use strict';

      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function() {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function(data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title ? data.title.trim() : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content ? data.content.trim().replace(/<[^>]+>/g,"") : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);
            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function(keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0, position = [], index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }

              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }

            // show search results

            if (isMatch) {
              // sort index by position of keyword

              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });

              // merge hits into slices

              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;

                  // move to next position of hit

                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {
                  hits: hits,
                  start: start,
                  end: end,
                  searchTextCount: searchTextCountInSlice
                };
              }

              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }

              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if(start < 0){
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if(end > content.length){
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }

              // sort slices in content by search text's count and hits' count

              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });

              // select top N slices in content

              var upperBound = parseInt('2');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }

              // highlight title and content

              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }

              var resultItem = '';

              if (slicesOfTitle.length != 0) {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
              } else {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
              }

              slicesOfContent.forEach(function (slice) {
                resultItem += "<a target='_blank' href='" + articleUrl + "'>" +
                  "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                  "...</p>" + "</a>";
              });

              resultItem += "</li>";
              resultItems.push({
                item: resultItem,
                searchTextCount: searchTextCount,
                hitCount: hitCount,
                id: resultItems.length
              });
            }
          })
        };
        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<ul class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</ul>";
          resultContent.innerHTML = searchResultList;
        }
      }

      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }

      // remove loading animation
      $('body').css('overflow', '');

      proceedsearch();
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        $('.sb-close').click();
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>


      
</body>
</html>
